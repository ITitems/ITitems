<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="CategoryDAO">

	<resultMap type="egovframework.let.cat.service.CategoryVO"
		id="CategoryList">
		<result property="catId" column="CAT_ID" />
		<result property="catName" column="CAT_NAME" />
	</resultMap>

	<sql id="search">
		<where>
			<if test="searchUpper == null or searchUpper == ''">
				UPPER_CAT IS NULL
			</if>
			<if test="searchUpper != null and searchUpper != ''">
				UPPER_CAT = #{searchUpper}
			</if>
			<if test="searchWord != null and searchWord != ''">
				CAT_NAME LIKE CONCAT ('%', #{searchWord},'%')
			</if>
		</where>
	</sql>

	<select id="SelectCategoryVOList"
		parameterType="egovframework.let.cat.service.CategoryManageVO"
		resultMap="CategoryList">
		SELECT CAT_ID, CAT_NAME, UPPER_CAT
		FROM CATEGORY
		<include refid="search"></include>
	</select>
	
	<delete id="DeleteCategory" parameterType="egovframework.let.cat.service.CategoryManageVO">
		DELETE FROM CATEGORY
		WHERE CAT_ID = #{catId}
	</delete>
</mapper>