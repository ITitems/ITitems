<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AssetHistDAO">

	<insert id="InsertAssetHist"
		parameterType="egovframework.let.ass.service.AssetHistVO">
		
		INSERT INTO ASSETSHIST(   
				  HIST_ID, 
		          ASSET_ID, 
		          ORGNZT_ID, 
		          PRJ_ID, 
		          USE_ID,  
		          HIST_STATUS, 
		          HIST_DATE, 
		          <if test="rcptDate != null and rcptDate != ''">
		          RCPT_DATE, 
		          </if>
		          RCPT_ID, 
		          CARRY_REASON,
		          HIST_GROUP
		      )
		VALUES (
		          #{histId}, 
		          #{assetId}, 
		          #{orgnztId}, 
		          #{prjId}, 
		          #{useId},  
		          #{histStatus},
		          DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i:%s'), 
		          <if test="rcptDate != null and rcptDate != ''">
		          DATE_FORMAT(#{rcptDate}, '%Y-%m-%d'), 
		          </if>
		          #{rcptId}, 
		          #{carryReason},
		          #{histGroup}
		       )
	</insert>
	
	<update id="UpdateAssetHist" parameterType="egovframework.let.ass.service.AssetHistVO">
		UPDATE 
			ASSETSHIST
		   SET
			ORGNZT_ID = #{orgnztId}, 
			PRJ_ID = #{prjId}, 
			USE_ID = #{useId},
			<if test="rcptDate != null and rcptDate != ''">
			RCPT_DATE = #{rcptDate},
			</if>
			RCPT_ID = #{rcptId}, 
			CARRY_REASON = #{carryReason}
		 WHERE ASSET_ID = #{assetId}
	</update>

</mapper>