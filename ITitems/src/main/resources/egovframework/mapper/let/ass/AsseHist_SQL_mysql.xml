<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AssetHistDAO">

	<resultMap type="egovframework.let.ass.service.AssetHistVO"
		id="AssetHistList">
		<result property="histId" column="HIST_ID" />
		<result property="useId" column="USE_ID" />
		<result property="histQty" column="HIST_QTY" />
		<result property="histStatus" column="HIST_STATUS" />
		<result property="histDate" column="HIST_DATE" />
		<result property="histGroup" column="HIST_GROUP" />
	</resultMap>

	<resultMap type="egovframework.let.ass.service.AssetHistVO"
		id="AssetHistDetail">
		<result property="" column="" />
	</resultMap>


	<select id="SelectAssetHistVOList"
		parameterType="egovframework.let.ass.service.AssetManageVO"
		resultMap="AssetHistList">
		SELECT 
			HIST_ID, 
			USE_ID, 
			HIST_QTY, 
			HIST_STATUS, 
			HIST_DATE, 
			HIST_GROUP
		  FROM ASSETSHIST
		 WHERE ASSET_ID = #{assetId}
	</select>

	<select id="CountAssetHistVOList"
		parameterType="egovframework.let.ass.service.AssetManageVO"
		resultType="int">
		SELECT 
			COUNT(HIST_ID)
		  FROM ASSETSHIST
		 WHERE ASSET_ID = #{assetId}
	</select>

	<insert id="InsertAssetHist"
		parameterType="egovframework.let.ass.service.AssetHistVO">
		
		INSERT INTO ASSETSHIST
		      (   HIST_ID, 
		          ASSET_ID, 
		          ORGNZT_ID, 
		          PRJ_ID, 
		          USE_ID, 
		          HIST_QTY, 
		          HIST_STATUS, 
		          HIST_NOTE, 
		          HIST_DATE, 
		          RCPT_DATE, 
		          RCPT_ID, 
		          CARRY_REASON, 
		          APPROVAL, 
		          CODE, 
		          FILE_ID )
		VALUES (
		          #{histId}, 
		          #{assetId}, 
		          #{orgnztId}, 
		          #{prjId}, 
		          #{useId}, 
		          #{histQty}, 
		          #{histStatus},
		          #{histNote},
		          DATE_FORMAT(CURRENT_DATE, '%Y-%m-%d %H:%i:%s'), 
		          DATE_FORMAT(#{rcptDate}, '%Y-%m-%d'), 
		          #{rcptId}, 
		          #{carryReason}, 
		          #{approval},
		          #{code}, 
		          #{fileId})
	</insert>

</mapper>