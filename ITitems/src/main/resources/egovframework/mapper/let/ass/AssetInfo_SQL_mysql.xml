<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AssetInfoDAO">

	<resultMap type="egovframework.let.ass.service.AssetInfoVO"
		id="assetInfoList">
		<result property="" column="" />
	</resultMap>

	<resultMap type="egovframework.let.ass.service.AssetInfoVO"
		id="assetInfoDetail">
		<result property="" column="" />
	</resultMap>

	<select id="SelectAssetInfoVOList"
		parameterType="egovframework.let.ass.service.AssetInfoVO"
		resultMap="assetInfoList">
		SELECT A.*
		FROM (SELECT ROW_NUMBER() OVER(ORDER BY ASSET_QTY
		DESC) AS
		RUM,LARGE_CATEGORY,MIDDLE_CATEGORY,ASSET_NAME,ASSET_QTY,ACQUIRED_DATE,ACQUIRED_PRICE,MAKER,NOTE
		FROM ASSETSINFO) A
		WHERE A.RUM BETWEEN 1 AND 3
	</select>

	<select id="SelectAssetInfoVO">

	</select>

	<insert id="InsertAssetInfo"
		parameterType="egovframework.let.ass.service.AssetInfoVO">
		<selectKey resultType="String" keyProperty="assetId"
			order="BEFORE">
			SELECT CONCAT('asi',IFNULL(MAX(SUBSTR(ASSET_ID,4))+1,0)) FROM ASSETSINFO
		</selectKey>
		INSERT INTO ASSETSINFO
		VALUES (#{assetId},
		#{largeCategory},#{middleCategory}, #{assetName}, #{assetQty},
		DATE_FORMAT(#{acquiredDate}, '%Y-%m-%d'), #{acquiredPrice},
		#{maker}, #{note}, #{regId},
		DATE_FORMAT(CURRENT_DATE, '%Y-%m-%d %H:%i:%s'),
		#{usageStatus}, #{addAsset}, #{photoId})
	</insert>

	<update id="UpdateAssetInfo">

	</update>
</mapper>